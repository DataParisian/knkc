/* KNKC chapter 13 programming project 12
 * Sundeep Kolli 27-apr-2014
 * Program: pp12.c
 * Purpose: Modify pp14.c from ch8 so that it stores the words in a 
 * two-dimensional char array as it reads the sentence with each row of the 
 * array storing a single word. Assume that the sentence contains no more than 
 * 30 words and no word is more than 20 characters long. Be sure to store a 
 * null character at the end of each word so that it can be treated as a string.
*/

#include <stdio.h>

#define LENGTH 200

int main (void){

	char sentence[LENGTH] = {'a'};
	char c, endChar;
	int charCount = 0, wordCount = 0;
	int i = 0, startPos = 0, endPos;
	int wordPos[LENGTH] = {0};
	
	printf ("Enter a sentence: ");
		
	while ((c = getchar()) != '\n' && charCount < LENGTH){
		if (c == '.' || c == '?' || c == '!'){
			endChar = c;				
		}else{
			if (c == ' '){
				wordPos[wordCount] = i + 1;
				wordCount++;
			}
			sentence[i] = c;
			i++;
		}
		charCount++;
	}	
	endPos = i - 1;
	startPos = wordCount - 1;
	
	printf ("Reversal of sentence: ");
	
	while (wordCount >= 0){
	
		for (i = wordPos[startPos]; i <= endPos; i++){
			printf("%c", sentence[i]);			
		}
		printf (" ");
		wordCount--;
		endPos = wordPos[startPos] - 2;
		startPos = wordCount - 1;
	}
	
	printf ("\b%c\n", endChar);
	
	return 0;
}
